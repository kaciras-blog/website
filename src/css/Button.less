@import "ToBeImpoert";

// 主要按钮颜色
@color-button-primary: #00c6ff;
@color-button-primary-text: #ffffff;

// 次要按钮颜色
@color-button-second: #f884c5;
@color-button-second-text: #ffffff;

//危险按钮颜色
@color-button-dangerous: #ef4c42;
@color-button-dangerous-text: white;

// 条纹宽度
@stripeWidth: 32px;

.button-group {
	&:not(.vertical) > .button, &:not(.vertical) > button {
		&:not(:last-child) {
			border-top-right-radius: 0;
			border-bottom-right-radius: 0;
		}
		&:not(:first-child) {
			border-top-left-radius: 0;
			border-bottom-left-radius: 0;

			margin-left: 1px;
			&.outline {
				margin-left: -1px;
			}
		}
	}
	&.vertical > .button, &.vertical > button {
		&:not(:last-child) {
			border-bottom-left-radius: 0;
			border-bottom-right-radius: 0;
		}
		&:not(:first-child) {
			border-top-left-radius: 0;
			border-top-right-radius: 0;

			margin-top: 1px;
			&.outline {
				margin-top: -1px;
			}
		}
	}
}

.button, button {
	display: inline-block;
	position: relative;
	vertical-align: top;

	padding: .5rem 1.2rem;
	font-size: 1rem;
	line-height: 1;
	text-align: center;

	border-radius: 5px;
	.click-item;

	&:focus {
		outline: 0;
	}

	& .fa {
		display: inline; // 这傻逼FontAwesome不知道发什么疯，::before比外层还高1px
		margin-right: .2em;
	}

	&.cusp{
		border-radius: 0;
	}

	transition: ease-in-out .15s;
	.button-color("primary");

	&.transparent {
		color: @color-text;
		background: none;
		&:hover {
			color: @color-text  + #303030;
		}
	}

	&.second {.button-color("second");}
	&.dangerous {.button-color("dangerous");}

	&:disabled, :disabled:hover {
		cursor: initial;

		&:not(.running) {
			color: dimgray;
			border-color: #d1d7d7;
			background-color: #d1d7d7;
		}
	}
}

.button-color(@name) {
	// 先从变量名获取到相应的变量（背景色，文字色）
	@cbkg: "color-button-@{name}";
	@ctext: "color-button-@{name}-text";
	@color-hover: @@cbkg - #101010;

	border: solid 1px @@cbkg;
	background-color: @@cbkg;
	color: @@ctext;

	&:hover {
		background-color: @color-hover;

		// <a class=".button"> 需要
		color: @@ctext;
		text-decoration: none;
	}
	&:focus::after {
		content: "";
		pointer-events: none;
		opacity: 0;
		display: block;
		position: absolute;
		animation: button-ripple .4s;
		.margin-abs(-2px);

		border-radius: 6px;
		border: solid 4px @@cbkg;
	}

	// 镂空按钮样式
	&.outline {
		background-color: transparent;
		color: @@cbkg;

		&:hover {
			color: @@ctext;
			background-color: @@cbkg;
		}
		&:active {
			color: @@ctext;
			background-color: @@cbkg + #0a0a0a;
		}
	}

	// 图标按钮样式
	&.icon {
		border: none;
		font-size: 1.3rem;
		padding: .3rem .8rem;
	}

	// 正在运行的按钮样式，因为需要长时间运行的任务并不一定是加载，所以没用.loading
	// noinspection CssOptimizeSimilarProperties
	&.running {
		@c: lighten(@@cbkg, 12%);
		background-color: @color-hover;
		background-size: @stripeWidth @stripeWidth;
		background-image: linear-gradient(-45deg, @c 25%, transparent 25%, transparent 50%, @c 50%, @c 75%, transparent 75%);
		animation: barbershop linear .4s infinite;
	}
}

@keyframes button-ripple {
	0% {
		opacity: 1;
	}
	100% {
		opacity: 0;
		transform: scale(1.1, 1.2);
	}
}

// 国内理发店就是这个效果
@keyframes barbershop {
	from {background-position: 0;}
	to {background-position: -@stripeWidth;}
}
